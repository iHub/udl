<% provide(:page_title, "Comments") %>
<% provide(:app_page, "fb_comments" ) %>

<div class="page-header">
    <h2 class="pull-left">Comments Collected</h2>
    <div class="clearfix"></div>
</div>

<div class="panel panel-default session-summary">
  <div class="panel-heading">Post Summary</div>
  <div class="panel-body">
        <%= render 'shared/fb_post_description', object: @fb_post, page: @scrape_page, session: @scrape_session %>
    </div>
</div>

<div class="whitespace"></div>


<% if @fb_comments.empty? %>
    <div class="post-content">
        <h4>Source: <strong><%= @scrape_page.page_url %></strong></h4>
        <h5>Created <%= @fb_post.created_time.strftime("%I:%M %p, %b %e %Y") %> Ago<span><%= pluralize(@fb_comments.count, "Comment")  %></span></h5>
        <div class="whitespace"></div>
        <div class="well well-sm">
            <p><%= @fb_post.message %></p>
        </div>
    </div>

    <hr />

    <div class="well well-sm">
        <p>This post doesn't have any comments.</p>
    </div>

<% else %>
    <div class="panel panel-default">
        <%= search_form_for(@search, url: fb_comments_search_path , method: :post,  class: "", role: "search")  do |f| %>
            <div class="panel-body">
                <%= f.text_field :message_cont, class: "form-control col-md-8 pull-left search-form", 
                                        placeholder: "Search Comments..." %>
           
            <%= f.submit "Search", class: "btn btn-large btn-primary pull-right" %>
             <div class="clearfix"></div>
         </div>
        <% end %>
    </div>

    
    <div class="clearfix"></div>
    <hr />

    <%= render 'shared/fb_comment_list', object: @fb_comments  %>
    <div class="center-block">
        <%= will_paginate @fb_comments %>
    </div>
<% end %>


<% content_for :debug_dump do %>
 <p>is empty <%= @fb_comments.empty? %></p>
<% end %>