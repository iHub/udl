<% provide(:page_title, "Show Session") %>
<% provide(:app_page, "scrape_sessions" ) %>
<% provide(:app_sub, "scrape_sessions_show" ) %>

<div class="page-header">
	<h2 class="pull-left">Manage</h2>

	<ul class="nav nav-pills pull-right">
		<div class="btn-group">
		  <button type="button" class="btn btn-default dropdown-toggle session-manage" data-toggle="dropdown">
		    Manage <span class="caret"></span>
		  </button>
		  <ul class="dropdown-menu" role="menu">
		    <li><%= link_to "Import Pages", import_scrape_session_path(@scrape_session) %></li>
		    <li><%= link_to "Retro Scrape", retro_scrape_session_path(@scrape_session) %></li>
		    <li><%= link_to "Edit Session", edit_scrape_session_path(@scrape_session) %></li>
		    <li class="divider"></li>
			<li>
				<%= link_to("Delete Session", @scrape_session, :method => :delete, data: { confirm: "Are you sure? You cannot undo this action"}, class: "delete-link") %>
			</li>
		  </ul>
		</div>
	</ul>

	<div class="clearfix"></div>
</div>

<div class="well well-sm">
	<h3 class="session-name">
		<span><%= @scrape_session.name %></span>
		<small class="pull-right">Created by 
			<strong><%= @created_by %></strong>
		</small>
	</h3>
	<p class="session-description-well"><%= @scrape_session.description %></p>
	<hr />
	<h4>Pages    : <%= @scrape_pages.count  unless @scrape_pages.nil? %></h4>
	<h4>Questions: <%= @questions.count unless @questions.nil? %></h4>
</div>

<div class="whitespace"></div>

<% if !@scrape_pages.empty? %>

	<div class="panel panel-default dash-stats-sessions">
	  <div class="panel-heading">Recent Pages</div>
	  <div class="panel-body">
	   <%= render 'shared/scrape_page_list', object: @scrape_pages %>
	  </div>

	  <% if @has_more_pages %>
		  <div class="panel-footer">
		  	<%= link_to "View All Pages", scrape_session_scrape_pages_path(@scrape_session), class: "" %>
		  </div>
	  <% end %>

	</div>

	<!-- add pagination -->

<% else %>
	<div class="container">
		<h4>You haven't added any Pages to this session</h4>
	</div>
<% end %>


<div class="whitespace"></div>


<% if !@questions.empty? %>


	<div class="panel panel-default dash-stats-sessions">
	  <div class="panel-heading">Recent Questions</div>
	  <div class="panel-body">
	   <%= render 'shared/question_list', object: @questions %>
	  </div>

	  <% if @has_more_questions %>
		  <div class="panel-footer">
		  	<%= link_to "View All Questions", scrape_session_questions_path(@scrape_session), class: "" %>
		  </div>
	  <% end %>

	</div>

	<!-- add pagination -->

<% else %>
	<div class="container">
		<h4>You haven't added any Questions to this session</h4>
	</div>
<% end %>

<% content_for :debug_dump do %>

<% end %>